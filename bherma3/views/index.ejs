
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Insert title here</title>
</head>
<body>
  <html>
  <body>
   <script src='https://code.jquery.com/jquery-2.1.1.min.js'></script>
   <script>
     $(document).ready(function(){
       $("#key").blur(function(){
         var fetch_push = setInterval(loop, 1000);
         tick = 0;
         function loop(){
          $.ajax({
            url:"/document/time",
            type: "GET",
            data: {'TICK':tick}
          }).done(function(data){            
            if(data.OP === 'PULL'){
              pull();
            }else{
              push();
            }
          });
        }
        function pull(){
         $.ajax({
          url: '/document/pull?key='+ $("#key").val(),
          type:'GET'
        }).done(function(data) {
         $("#pad").val(data.doc);
       }
       );
      }
      function push(){
       $.ajax({
        url: '/document/push',
        data:
        {'key': $("#key").val(),
        'value': $("#pad").val()},
        'tick', tick
        type:"GET"
      }).done(function(data){
        console.log(data);
      });
    }
  });
  </script>
   <input type="text" id="key" size=32>
   <br>
   <textarea cols="80" rows="80" id="pad"></textarea>
   <br>
   </html>
 </body>
 </html>
